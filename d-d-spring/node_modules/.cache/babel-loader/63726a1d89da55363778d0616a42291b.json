{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/kuanting/development/recycle-game-sandbox/d-d-spring/src/components/Food.js\",\n    _s = $RefreshSig$();\n\n/* eslint-disable no-unused-vars */\nimport React from 'react';\nimport { DragDropContainer } from \"react-drag-drop-container\";\nimport { useSpring, animated, to } from \"react-spring\";\nimport { useGesture } from \"react-with-gesture\";\n/* \n    Food is a draggable element (in a DragDropContainer)\n*/\n\nconst calcX = (y, ly) => -(y - ly - window.innerHeight / 2) / 20;\n\nconst calcY = (x, lx) => (x - lx - window.innerWidth / 2) / 20;\n\nconst wheel = y => {\n  const imgHeight = window.innerWidth * 0.3 - 20;\n  return `translateY(${-imgHeight * (y < 0 ? 6 : 1) - y % (imgHeight * 5)}px`;\n};\n\ndocument.addEventListener('gesturestart', e => e.preventDefault());\ndocument.addEventListener('gesturechange', e => e.preventDefault());\n\nconst Food = props => {\n  _s();\n\n  const landedOn = e => {\n    console.log('I was dropped on ' + e.dropData.name);\n    console.log({\n      'onDrop event passed back to Food': e\n    });\n  };\n\n  const domTarget = React.useRef(null);\n  const [{\n    x,\n    y,\n    rotateX,\n    rotateY,\n    rotateZ,\n    zoom,\n    scale\n  }, set] = useSpring(() => ({\n    rotateX: 0,\n    rotateY: 0,\n    rotateZ: 0,\n    scale: 1,\n    zoom: 0,\n    x: 0,\n    y: 0,\n    config: {\n      mass: 5,\n      tension: 350,\n      friction: 40\n    }\n  }));\n  const [{\n    wheelY\n  }, setWheel] = useSpring(() => ({\n    wheelY: 0\n  }));\n  const [drag, setDrag] = React.useState(false);\n  useGesture({\n    onDragStart: () => setDrag(true),\n    onDrag: ({\n      offset: [x, y]\n    }) => set({\n      x,\n      y,\n      rotateX: 0,\n      rotateY: 0,\n      scale: 1\n    }),\n    onDragEnd: () => setDrag(false),\n    onPinch: ({\n      offset: [d, a]\n    }) => set({\n      zoom: d / 200,\n      rotateZ: a\n    }),\n    onMove: ({\n      xy: [px, py],\n      dragging\n    }) => !dragging && set({\n      rotateX: calcX(py, y.get()),\n      rotateY: calcY(px, x.get()),\n      scale: 1.1\n    }),\n    onHover: ({\n      hovering\n    }) => !hovering && set({\n      rotateX: 0,\n      rotateY: 0,\n      scale: 1\n    }),\n    onWheel: ({\n      offset: [, y]\n    }) => setWheel({\n      wheelY: y\n    })\n  }, {\n    domTarget,\n    eventOptions: {\n      passive: false\n    }\n  }); // note use of render prop below, rather than child element\n\n  return /*#__PURE__*/_jsxDEV(animated.div, {\n    ref: domTarget,\n    className: `${drag ? 'dragging' : ''}`,\n    style: {\n      transform: 'perspective(600px)',\n      x,\n      y,\n      scale: to([scale, zoom], (s, z) => s + z),\n      rotateX,\n      rotateY,\n      rotateZ\n    },\n    children: [/*#__PURE__*/_jsxDEV(DragDropContainer, {\n      targetKey: props.targetKey,\n      dragClone: props.dragClone || false,\n      dragData: {\n        label: props.label,\n        tastes: props.tastes\n      },\n      customDragElement: props.customDragElement,\n      onDrop: landedOn,\n      render: () => {\n        return /*#__PURE__*/_jsxDEV(\"img\", {\n          src: props.image,\n          alt: \"name\",\n          height: \"45\",\n          style: {\n            marginLeft: 40\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 16\n        }, this);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 3\n    }, this), /*#__PURE__*/_jsxDEV(animated.div, {\n      style: {\n        transform: wheelY.to(wheel)\n      },\n      children: imgs.map((img, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          backgroundImage: `url(${img})`\n        }\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Food, \"as+aCZANMCw8y0O9DACzLeWawQQ=\", false, function () {\n  return [useSpring, useSpring, useGesture];\n});\n\n_c = Food;\nexport default Food;\n\nvar _c;\n\n$RefreshReg$(_c, \"Food\");","map":{"version":3,"sources":["/Users/kuanting/development/recycle-game-sandbox/d-d-spring/src/components/Food.js"],"names":["React","DragDropContainer","useSpring","animated","to","useGesture","calcX","y","ly","window","innerHeight","calcY","x","lx","innerWidth","wheel","imgHeight","document","addEventListener","e","preventDefault","Food","props","landedOn","console","log","dropData","name","domTarget","useRef","rotateX","rotateY","rotateZ","zoom","scale","set","config","mass","tension","friction","wheelY","setWheel","drag","setDrag","useState","onDragStart","onDrag","offset","onDragEnd","onPinch","d","a","onMove","xy","px","py","dragging","get","onHover","hovering","onWheel","eventOptions","passive","transform","s","z","targetKey","dragClone","label","tastes","customDragElement","image","marginLeft","imgs","map","img","i","backgroundImage"],"mappings":";;;;;AAAA;AACA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,iBAAT,QAAkC,2BAAlC;AACA,SAASC,SAAT,EAAoBC,QAApB,EAA8BC,EAA9B,QAAwC,cAAxC;AACA,SAASC,UAAT,QAA2B,oBAA3B;AACA;AACA;AACA;;AACA,MAAMC,KAAK,GAAG,CAACC,CAAD,EAAIC,EAAJ,KAAW,EAAED,CAAC,GAAGC,EAAJ,GAASC,MAAM,CAACC,WAAP,GAAqB,CAAhC,IAAqC,EAA9D;;AACA,MAAMC,KAAK,GAAG,CAACC,CAAD,EAAIC,EAAJ,KAAW,CAACD,CAAC,GAAGC,EAAJ,GAASJ,MAAM,CAACK,UAAP,GAAoB,CAA9B,IAAmC,EAA5D;;AAEA,MAAMC,KAAK,GAAIR,CAAD,IAAO;AACnB,QAAMS,SAAS,GAAGP,MAAM,CAACK,UAAP,GAAoB,GAApB,GAA0B,EAA5C;AACA,SAAQ,cAAa,CAACE,SAAD,IAAcT,CAAC,GAAG,CAAJ,GAAQ,CAAR,GAAY,CAA1B,IAAgCA,CAAC,IAAIS,SAAS,GAAG,CAAhB,CAAoB,IAA1E;AACD,CAHD;;AAKAC,QAAQ,CAACC,gBAAT,CAA0B,cAA1B,EAA2CC,CAAD,IAAOA,CAAC,CAACC,cAAF,EAAjD;AACAH,QAAQ,CAACC,gBAAT,CAA0B,eAA1B,EAA4CC,CAAD,IAAOA,CAAC,CAACC,cAAF,EAAlD;;AACA,MAAMC,IAAI,GAAIC,KAAD,IAAW;AAAA;;AACtB,QAAMC,QAAQ,GAAIJ,CAAD,IAAO;AACtBK,IAAAA,OAAO,CAACC,GAAR,CAAY,sBAAsBN,CAAC,CAACO,QAAF,CAAWC,IAA7C;AACAH,IAAAA,OAAO,CAACC,GAAR,CAAY;AAAE,0CAAoCN;AAAtC,KAAZ;AACD,GAHD;;AAKA,QAAMS,SAAS,GAAG5B,KAAK,CAAC6B,MAAN,CAAa,IAAb,CAAlB;AACA,QAAM,CAAC;AAAEjB,IAAAA,CAAF;AAAKL,IAAAA,CAAL;AAAQuB,IAAAA,OAAR;AAAiBC,IAAAA,OAAjB;AAA0BC,IAAAA,OAA1B;AAAmCC,IAAAA,IAAnC;AAAyCC,IAAAA;AAAzC,GAAD,EAAmDC,GAAnD,IAA0DjC,SAAS,CAAC,OAAO;AAC/E4B,IAAAA,OAAO,EAAE,CADsE;AAE/EC,IAAAA,OAAO,EAAE,CAFsE;AAG/EC,IAAAA,OAAO,EAAE,CAHsE;AAI/EE,IAAAA,KAAK,EAAE,CAJwE;AAK/ED,IAAAA,IAAI,EAAE,CALyE;AAM/ErB,IAAAA,CAAC,EAAE,CAN4E;AAO/EL,IAAAA,CAAC,EAAE,CAP4E;AAQ/E6B,IAAAA,MAAM,EAAE;AAAEC,MAAAA,IAAI,EAAE,CAAR;AAAWC,MAAAA,OAAO,EAAE,GAApB;AAAyBC,MAAAA,QAAQ,EAAE;AAAnC;AARuE,GAAP,CAAD,CAAzE;AAWA,QAAM,CAAC;AAAEC,IAAAA;AAAF,GAAD,EAAaC,QAAb,IAAyBvC,SAAS,CAAC,OAAO;AAAEsC,IAAAA,MAAM,EAAE;AAAV,GAAP,CAAD,CAAxC;AACA,QAAM,CAACE,IAAD,EAAOC,OAAP,IAAkB3C,KAAK,CAAC4C,QAAN,CAAe,KAAf,CAAxB;AAEAvC,EAAAA,UAAU,CACR;AACEwC,IAAAA,WAAW,EAAE,MAAMF,OAAO,CAAC,IAAD,CAD5B;AAEEG,IAAAA,MAAM,EAAE,CAAC;AAAEC,MAAAA,MAAM,EAAE,CAACnC,CAAD,EAAIL,CAAJ;AAAV,KAAD,KAAwB4B,GAAG,CAAC;AAAEvB,MAAAA,CAAF;AAAKL,MAAAA,CAAL;AAAQuB,MAAAA,OAAO,EAAE,CAAjB;AAAoBC,MAAAA,OAAO,EAAE,CAA7B;AAAgCG,MAAAA,KAAK,EAAE;AAAvC,KAAD,CAFrC;AAGEc,IAAAA,SAAS,EAAE,MAAML,OAAO,CAAC,KAAD,CAH1B;AAIEM,IAAAA,OAAO,EAAE,CAAC;AAAEF,MAAAA,MAAM,EAAE,CAACG,CAAD,EAAIC,CAAJ;AAAV,KAAD,KAAwBhB,GAAG,CAAC;AAAEF,MAAAA,IAAI,EAAEiB,CAAC,GAAG,GAAZ;AAAiBlB,MAAAA,OAAO,EAAEmB;AAA1B,KAAD,CAJtC;AAKEC,IAAAA,MAAM,EAAE,CAAC;AAAEC,MAAAA,EAAE,EAAE,CAACC,EAAD,EAAKC,EAAL,CAAN;AAAgBC,MAAAA;AAAhB,KAAD,KAAgC,CAACA,QAAD,IAAarB,GAAG,CAAC;AAAEL,MAAAA,OAAO,EAAExB,KAAK,CAACiD,EAAD,EAAKhD,CAAC,CAACkD,GAAF,EAAL,CAAhB;AAA+B1B,MAAAA,OAAO,EAAEpB,KAAK,CAAC2C,EAAD,EAAK1C,CAAC,CAAC6C,GAAF,EAAL,CAA7C;AAA4DvB,MAAAA,KAAK,EAAE;AAAnE,KAAD,CAL1D;AAMEwB,IAAAA,OAAO,EAAE,CAAC;AAAEC,MAAAA;AAAF,KAAD,KAAkB,CAACA,QAAD,IAAaxB,GAAG,CAAC;AAAEL,MAAAA,OAAO,EAAE,CAAX;AAAcC,MAAAA,OAAO,EAAE,CAAvB;AAA0BG,MAAAA,KAAK,EAAE;AAAjC,KAAD,CAN7C;AAOE0B,IAAAA,OAAO,EAAE,CAAC;AAAEb,MAAAA,MAAM,EAAE,GAAGxC,CAAH;AAAV,KAAD,KAAuBkC,QAAQ,CAAC;AAAED,MAAAA,MAAM,EAAEjC;AAAV,KAAD;AAP1C,GADQ,EAUR;AAAEqB,IAAAA,SAAF;AAAaiC,IAAAA,YAAY,EAAE;AAAEC,MAAAA,OAAO,EAAE;AAAX;AAA3B,GAVQ,CAAV,CArBsB,CAiCtB;;AACA,sBAIE,QAAC,QAAD,CAAU,GAAV;AACA,IAAA,GAAG,EAAElC,SADL;AAEA,IAAA,SAAS,EAAG,GAAEc,IAAI,GAAG,UAAH,GAAgB,EAAG,EAFrC;AAGA,IAAA,KAAK,EAAE;AAAEqB,MAAAA,SAAS,EAAE,oBAAb;AAAmCnD,MAAAA,CAAnC;AAAsCL,MAAAA,CAAtC;AAAyC2B,MAAAA,KAAK,EAAE9B,EAAE,CAAC,CAAC8B,KAAD,EAAQD,IAAR,CAAD,EAAgB,CAAC+B,CAAD,EAAIC,CAAJ,KAAUD,CAAC,GAAGC,CAA9B,CAAlD;AAAoFnC,MAAAA,OAApF;AAA6FC,MAAAA,OAA7F;AAAsGC,MAAAA;AAAtG,KAHP;AAAA,4BAKF,QAAC,iBAAD;AACI,MAAA,SAAS,EAAEV,KAAK,CAAC4C,SADrB;AAEI,MAAA,SAAS,EAAE5C,KAAK,CAAC6C,SAAN,IAAmB,KAFlC;AAGI,MAAA,QAAQ,EAAE;AAAEC,QAAAA,KAAK,EAAE9C,KAAK,CAAC8C,KAAf;AAAsBC,QAAAA,MAAM,EAAE/C,KAAK,CAAC+C;AAApC,OAHd;AAII,MAAA,iBAAiB,EAAE/C,KAAK,CAACgD,iBAJ7B;AAKI,MAAA,MAAM,EAAE/C,QALZ;AAMI,MAAA,MAAM,EAAE,MAAM;AACZ,4BAAO;AAAK,UAAA,GAAG,EAAED,KAAK,CAACiD,KAAhB;AAAuB,UAAA,GAAG,EAAC,MAA3B;AAAkC,UAAA,MAAM,EAAC,IAAzC;AAA8C,UAAA,KAAK,EAAE;AAAEC,YAAAA,UAAU,EAAE;AAAd;AAArD;AAAA;AAAA;AAAA;AAAA,gBAAP;AACD;AARL;AAAA;AAAA;AAAA;AAAA,YALE,eAgBA,QAAC,QAAD,CAAU,GAAV;AAAc,MAAA,KAAK,EAAE;AAAET,QAAAA,SAAS,EAAEvB,MAAM,CAACpC,EAAP,CAAUW,KAAV;AAAb,OAArB;AAAA,gBACG0D,IAAI,CAACC,GAAL,CAAS,CAACC,GAAD,EAAMC,CAAN,kBACR;AAAa,QAAA,KAAK,EAAE;AAAEC,UAAAA,eAAe,EAAG,OAAMF,GAAI;AAA9B;AAApB,SAAUC,CAAV;AAAA;AAAA;AAAA;AAAA,cADD;AADH;AAAA;AAAA;AAAA;AAAA,YAhBA;AAAA;AAAA;AAAA;AAAA;AAAA,UAJF;AA6BD,CA/DD;;GAAMvD,I;UAO4DnB,S,EAWjCA,S,EAG/BG,U;;;KArBIgB,I;AAgEN,eAAeA,IAAf","sourcesContent":["/* eslint-disable no-unused-vars */\nimport React from 'react';\nimport { DragDropContainer } from \"react-drag-drop-container\";\nimport { useSpring, animated, to } from \"react-spring\";\nimport { useGesture } from \"react-with-gesture\";\n/* \n    Food is a draggable element (in a DragDropContainer)\n*/\nconst calcX = (y, ly) => -(y - ly - window.innerHeight / 2) / 20\nconst calcY = (x, lx) => (x - lx - window.innerWidth / 2) / 20\n\nconst wheel = (y) => {\n  const imgHeight = window.innerWidth * 0.3 - 20\n  return `translateY(${-imgHeight * (y < 0 ? 6 : 1) - (y % (imgHeight * 5))}px`\n}\n\ndocument.addEventListener('gesturestart', (e) => e.preventDefault())\ndocument.addEventListener('gesturechange', (e) => e.preventDefault())\nconst Food = (props) => {\n  const landedOn = (e) => {\n    console.log('I was dropped on ' + e.dropData.name)\n    console.log({ 'onDrop event passed back to Food': e });\n  }\n\n  const domTarget = React.useRef(null)\n  const [{ x, y, rotateX, rotateY, rotateZ, zoom, scale }, set] = useSpring(() => ({\n    rotateX: 0,\n    rotateY: 0,\n    rotateZ: 0,\n    scale: 1,\n    zoom: 0,\n    x: 0,\n    y: 0,\n    config: { mass: 5, tension: 350, friction: 40 }\n  }))\n\n  const [{ wheelY }, setWheel] = useSpring(() => ({ wheelY: 0 }))\n  const [drag, setDrag] = React.useState(false)\n\n  useGesture(\n    {\n      onDragStart: () => setDrag(true),\n      onDrag: ({ offset: [x, y] }) => set({ x, y, rotateX: 0, rotateY: 0, scale: 1 }),\n      onDragEnd: () => setDrag(false),\n      onPinch: ({ offset: [d, a] }) => set({ zoom: d / 200, rotateZ: a }),\n      onMove: ({ xy: [px, py], dragging }) => !dragging && set({ rotateX: calcX(py, y.get()), rotateY: calcY(px, x.get()), scale: 1.1 }),\n      onHover: ({ hovering }) => !hovering && set({ rotateX: 0, rotateY: 0, scale: 1 }),\n      onWheel: ({ offset: [, y] }) => setWheel({ wheelY: y })\n    },\n    { domTarget, eventOptions: { passive: false } }\n  )\n  // note use of render prop below, rather than child element\n  return (\n\n\n   \n    <animated.div\n    ref={domTarget}\n    className={`${drag ? 'dragging' : ''}`}\n    style={{ transform: 'perspective(600px)', x, y, scale: to([scale, zoom], (s, z) => s + z), rotateX, rotateY, rotateZ }}\n  >\n  <DragDropContainer\n      targetKey={props.targetKey}\n      dragClone={props.dragClone || false}\n      dragData={{ label: props.label, tastes: props.tastes }}\n      customDragElement={props.customDragElement}\n      onDrop={landedOn}\n      render={() => {\n        return <img src={props.image} alt=\"name\" height=\"45\" style={{ marginLeft: 40 }} />\n      }}\n    />\n  \n    <animated.div style={{ transform: wheelY.to(wheel) }}>\n      {imgs.map((img, i) => (\n        <div key={i} style={{ backgroundImage: `url(${img})` }} />\n      ))}\n    </animated.div>\n  </animated.div>\n)\n \n  \n}\nexport default Food;"]},"metadata":{},"sourceType":"module"}